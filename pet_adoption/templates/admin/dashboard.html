<!DOCTYPE html>

	<html>

	<head>
		<title>Paw-sitively Purrfect Partners</title>
		{# keep CSS link commented out for now #}
		<style>
		h1 {text-align: center;}
		section {text-align: center;}
		.navbar { display: flex; position: sticky; align-items: center; justify-content: space-between; top: 0px; padding: 10px 20px; }
		.nav-list { display: flex; list-style: none; }
		.nav-list li { margin-right: 20px; }
		.btn { background-color: #ffd700; color: #000; border: none; padding: 8px 12px; border-radius: 5px; cursor: pointer; }
		.btn-danger { background-color: #e03e2d; color: #fff; }
		</style>

	</head>

	<body>
	  <nav class="navbar">
		<ul class="nav-list">
			<li><a href="{{ url_for('main.browse') if 'main' in globals() else url_for('index') }}">Browse Pets</a></li>
			<li><a href="{{ url_for('main.search') if 'main' in globals() else '#' }}">Search Pets</a></li>
			<li><a href="#">Donate</a></li>
			<li><a href="#">Contact Us</a></li>
			<li><a href="{{ url_for('auth.login') if 'auth' in globals() else '/' }}">Login</a></li>
			<li><a href="{{ url_for('auth.register') if 'auth' in globals() else 'register' }}">Register</a></li>
		</ul>
	  </nav>

		{# Flash messages #}
		{% with messages = get_flashed_messages(with_categories=true) %}
			{% if messages %}
				{% for category, message in messages %}
					<div class="alert alert-{{ category }}">{{ message }}</div>
				{% endfor %}
			{% endif %}
		{% endwith %}

		{# Form Section - Create or Edit based on animal variable#}
	  	<div class="form-section">
			{% if animal %}
				<h2>Edit Pet</h2>
				<form action="{{ url_for('admin.admin_dashboard') }}" method="post">
				</form>
			{% else %}
				<h2>Create New Pet</h2>
			{% endif %}

		{# Name Field #}
		{# Pet Type Field #}
		{# Availability Field #}
		{# Breed Field #}
		{# Profile Date (Read Only) Field #}
		{# Disposition Field #}
		{# News Item Field #}
		{# Image Upload Field #}
		{# Submit Button #}

		</div>

		{# Pets Table #}
		<div id="browse">
			<table class="table" border="1" cellpadding="5">
				{% if animals and animals|length > 0 %}
					<thead>
						<tr>
							<th>Pet Name</th>
							<th>Availability</th>
							<th>Type</th>
							<th>Breed</th>
							<th>Description</th>
							<th>Disposition</th>
							<th>News Items</th>
							<th>Images</th>
							<th>Actions</th>
						</tr>
					</thead>
					<tbody>
					{% for animal in animals %}
						<tr>
							<td>{{ animal.name }}</td>
							<td>{{ animal.type }}</td>
							<td>{{ animal.breed }}</td>
							<td>{{ animal.description }}</td>
							<td>{{ animal.disposition | join(', ') }}</td>
							<td>{{ animal.news_item}}</td>
							<td>{% if animal.public_image %}Image{% else %}--{% endif %}</td>
							<td>
								<a class="btn btn-success" href="{{ url_for('admin.edit_pet', id=animal._id) }}">Edit</a>

								<form action="{{ url_for('admin.delete_pet', id=animal._id) }}" method="post" style="display:inline">
									{% if csrf_token is defined %}
										<input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
									{% endif %}
									<button type="submit" class="btn btn-danger">Delete</button>
								</form>
							</td>
						</tr>
					{% endfor %}
					</tbody>
				{% else %}
					<tr><td colspan="9">No pets available.</td></tr>
				{% endif %}
			</table>
		</div>

	</body>
	</html>